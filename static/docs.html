<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIDAN Brain API - Documentation</title>
    <meta name="description" content="API documentation for AIDAN Brain API - AI-powered memory and knowledge search.">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; max-width: 1000px; margin: 0 auto; padding: 2rem; line-height: 1.6; color: #333; }
        header { text-align: center; margin-bottom: 3rem; }
        h1 { color: #2563eb; }
        h2 { margin-top: 2.5rem; border-bottom: 1px solid #ddd; padding-bottom: 0.5rem; }
        table { border-collapse: collapse; width: 100%; margin: 1.5rem 0; }
        th, td { border: 1px solid #ddd; padding: 0.75rem; text-align: left; vertical-align: top; }
        th { background-color: #f8f9fa; font-weight: 600; }
        code { background: #f4f4f4; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: 'SF Mono', Monaco, 'Courier New', monospace; }
        pre { background: #f8f9fa; padding: 1rem; border-radius: 8px; overflow-x: auto; }
        .method-get { color: #10b981; }
        .method-post { color: #3b82f6; }
        .method-put { color: #f59e0b; }
        .endpoint { font-family: monospace; font-size: 0.95rem; }
        .auth { background: #fef3c7; padding: 0.25rem 0.5rem; border-radius: 4px; }
        footer { margin-top: 3rem; text-align: center; color: #666; }
        .back { display: inline-block; margin-bottom: 2rem; color: #2563eb; text-decoration: none; }
        .back:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <a href="/" class="back">← Back to homepage</a>
    <header>
        <h1>AIDAN Brain API Documentation</h1>
        <p>Complete reference for the AI‑powered memory and knowledge search API.</p>
    </header>

    <section>
        <h2>Authentication</h2>
        <p>All endpoints (except <code>/health</code> and <code>/api</code>) require an API key passed in the <code>X‑API‑Key</code> header:</p>
        <pre><code>curl -H "X-API-Key: sk_..." https://aidan-revenue-api.fly.dev/brain/status</code></pre>
        <p>To get a free API key (100 requests/day), visit the <a href="/">homepage</a> and register with your email.</p>
    </section>

    <section>
        <h2>Endpoints</h2>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Description</th>
                    <th>Authentication</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/health</td>
                    <td>Service health check</td>
                    <td>None</td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/api</td>
                    <td>API information and version</td>
                    <td>None</td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/brain/status</td>
                    <td>Brain database overview (goals count, metrics, etc.)</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/brain/goals</td>
                    <td>List active goals with progress and priority</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/brain/learnings</td>
                    <td>Retrieve recent learnings and insights</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-post">POST</span></td>
                    <td class="endpoint">/brain/query</td>
                    <td>Query structured brain data (goals, learnings, procedures, metrics, tasks, self_model)</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-post">POST</span></td>
                    <td class="endpoint">/search</td>
                    <td>Semantic search across vector memory (ChromaDB) with natural language</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-post">POST</span></td>
                    <td class="endpoint">/api/register</td>
                    <td>Register for a free API key (requires email and tier)</td>
                    <td>None</td>
                </tr>
                <tr>
                    <td><span class="method-post">POST</span></td>
                    <td class="endpoint">/stripe/webhook</td>
                    <td>Stripe payment webhook (internal)</td>
                    <td>Stripe signature</td>
                </tr>
                <tr>
                    <td><span class="method-post">POST</span></td>
                    <td class="endpoint">/pdf/extract</td>
                    <td>Extract text and tables from PDF files</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-post">POST</span></td>
                    <td class="endpoint">/monitor/price</td>
                    <td>Monitor e‑commerce price drops (internal)</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-post">POST</span></td>
                    <td class="endpoint">/revenue/streams</td>
                    <td>Create a new revenue stream entry</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/revenue/streams</td>
                    <td>List all revenue streams</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/revenue/streams/{stream_id}</td>
                    <td>Get a specific revenue stream</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-put">PUT</span></td>
                    <td class="endpoint">/revenue/streams/{stream_id}</td>
                    <td>Update a revenue stream (e.g., monthly revenue)</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/revenue/summary</td>
                    <td>Summary of all revenue streams (totals, growth)</td>
                    <td><span class="auth">API key</span></td>
                </tr>
                <tr>
                    <td><span class="method-get">GET</span></td>
                    <td class="endpoint">/revenue/transactions</td>
                    <td>List recent revenue transactions</td>
                    <td><span class="auth">API key</span></td>
                </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h2>Example Requests</h2>
        
        <h3>Get brain status</h3>
        <pre><code>curl -H "X-API-Key: sk_..." \
     https://aidan-revenue-api.fly.dev/brain/status</code></pre>
        
        <h3>Query goals</h3>
        <pre><code>curl -X POST -H "Content-Type: application/json" \
     -H "X-API-Key: sk_..." \
     -d '{"table": "goals", "limit": 5}' \
     https://aidan-revenue-api.fly.dev/brain/query</code></pre>
        
        <h3>Semantic search</h3>
        <pre><code>curl -X POST -H "Content-Type: application/json" \
     -H "X-API-Key: sk_..." \
     -d '{"query": "revenue generation strategies"}' \
     https://aidan-revenue-api.fly.dev/search</code></pre>
    </section>

    <section>
        <h2>Rate Limits</h2>
        <ul>
            <li><strong>Free tier</strong>: 100 requests/day</li>
            <li><strong>Basic tier</strong>: 1,000 requests/day</li>
            <li><strong>Pro tier</strong>: 10,000 requests/day</li>
            <li><strong>Revenue API tier</strong>: 5,000 requests/day</li>
        </ul>
        <p>Rate limits are per API key and reset at UTC midnight.</p>
    </section>

    <footer>
        <p>AIDAN Brain API is part of the AIDAN autonomous agent project. &copy; 2026</p>
        <p>Contact: <a href="mailto:admin@aidan.ai">admin@aidan.ai</a></p>
    </footer>
</body>
</html>